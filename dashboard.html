<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - UrbanGrow</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-left">
            <a href="index.html" class="nav-button">üè† Home</a>
            <div class="logo">üåø UrbanGrow</div>
        </div>
        <div class="header-center">
            <input type="text" id="search-bar" placeholder="Search for plants..." />
            <button id="camera-btn" class="nav-button">üì∑</button>
        </div>
        <div class="header-right" id="header-right">
            <!-- Dynamic: Dashboard and Account -->
        </div>
    </header>
    <main>
        <section id="dashboard">
            <div class="dashboard-header">
                <div class="welcome-message">
                    <h1>Welcome back, <span id="user-name-display">Gardener</span>! üåø</h1>
                    <p>Here's what's happening in your garden today</p>
                </div>
                <div class="current-date" id="current-date"></div>
            </div>

            <!-- Stats Overview -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üå±</div>
                    <div class="stat-content">
                        <h3>Total Plants</h3>
                        <p class="stat-number" id="total-plants">12</p>
                        <span class="stat-change positive">+2 this week</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üíß</div>
                    <div class="stat-content">
                        <h3>Tasks Today</h3>
                        <p class="stat-number" id="tasks-today">5</p>
                        <span class="stat-change">3 completed</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <h3>Healthy Plants</h3>
                        <p class="stat-number" id="healthy-plants">10</p>
                        <span class="stat-change positive">83% health rate</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö†Ô∏è</div>
                    <div class="stat-content">
                        <h3>Need Attention</h3>
                        <p class="stat-number" id="attention-plants">2</p>
                        <span class="stat-change warning">Check now</span>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="section-title">
                <h2>Quick Actions</h2>
            </div>
            <div class="dashboard-grid">
                <div class="dashboard-card quick-action">
                    <div class="card-icon">üì∑</div>
                    <h3>Identify Plant</h3>
                    <p>Take a photo to identify your plant</p>
                    <a href="index.html#identify" class="action-button">Start Scan</a>
                </div>
                <div class="dashboard-card quick-action">
                    <div class="card-icon">‚ûï</div>
                    <h3>Add Plant</h3>
                    <p>Add a new plant to your garden</p>
                    <a href="index.html#add" class="action-button">Add Now</a>
                </div>
                <div class="dashboard-card quick-action">
                    <div class="card-icon">üîî</div>
                    <h3>Set Reminder</h3>
                    <p>Schedule plant care tasks</p>
                    <a href="reminders.html" class="action-button">Create</a>
                </div>
                <div class="dashboard-card quick-action">
                    <div class="card-icon">üìö</div>
                    <h3>Growing Guides</h3>
                    <p>Learn how to grow plants</p>
                    <a href="plants.html" class="action-button">Explore</a>
                </div>
            </div>

            <!-- Recent Activity & Upcoming Tasks -->
            <div class="dashboard-sections">
                <div class="activity-section">
                    <div class="section-header">
                        <h2>üìã Upcoming Tasks</h2>
                        <a href="reminders.html" class="view-all">View All ‚Üí</a>
                    </div>
                    <div class="task-list">
                        <div class="task-item">
                            <div class="task-icon">üíß</div>
                            <div class="task-details">
                                <h4>Water Snake Plant</h4>
                                <p>Due in 2 hours</p>
                            </div>
                            <button class="task-complete">‚úì</button>
                        </div>
                        <div class="task-item">
                            <div class="task-icon">üåø</div>
                            <div class="task-details">
                                <h4>Fertilize Tomatoes</h4>
                                <p>Due today at 5:00 PM</p>
                            </div>
                            <button class="task-complete">‚úì</button>
                        </div>
                        <div class="task-item">
                            <div class="task-icon">‚úÇÔ∏è</div>
                            <div class="task-details">
                                <h4>Prune Basil</h4>
                                <p>Due tomorrow</p>
                            </div>
                            <button class="task-complete">‚úì</button>
                        </div>
                    </div>
                </div>

                <div class="activity-section">
                    <div class="section-header">
                        <h2>üå± My Garden</h2>
                        <a href="index.html" class="view-all">View All ‚Üí</a>
                    </div>
                    <div class="plant-grid">
                        <div class="plant-mini-card">
                            <img src="snakeplant.webp" alt="Snake Plant" onerror="this.src='default.jpg'">
                            <div class="plant-info">
                                <h4>Snake Plant</h4>
                                <span class="health-badge healthy">Healthy</span>
                            </div>
                        </div>
                        <div class="plant-mini-card">
                            <img src="cherrytomato.webp" alt="Cherry Tomato" onerror="this.src='default.jpg'">
                            <div class="plant-info">
                                <h4>Cherry Tomato</h4>
                                <span class="health-badge attention">Needs Water</span>
                            </div>
                        </div>
                        <div class="plant-mini-card">
                            <img src="default.jpg" alt="Basil">
                            <div class="plant-info">
                                <h4>Basil</h4>
                                <span class="health-badge healthy">Healthy</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Cards -->
            <div class="section-title">
                <h2>Manage Your Garden</h2>
            </div>
            <div class="nav-cards">
                <a href="index.html" class="nav-card">
                    <div class="nav-card-icon">üè°</div>
                    <h3>My Garden</h3>
                    <p>View and manage all your plants</p>
                </a>
                <a href="trackrecord.html" class="nav-card">
                    <div class="nav-card-icon">üìä</div>
                    <h3>Track Record</h3>
                    <p>View your gardening activities</p>
                </a>
                <a href="profile.html" class="nav-card">
                    <div class="nav-card-icon">üë§</div>
                    <h3>Profile</h3>
                    <p>Manage your account settings</p>
                </a>
            </div>
        </section>
    </main>
    <script>
        // Auth check
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser) {
            window.location.href = 'login.html';
        } else {
            // Update header for logged in
            const headerRight = document.getElementById('header-right');
            headerRight.innerHTML = `<a href="dashboard.html" class="nav-button">Dashboard</a> <div class="account-dropdown" id="account-name">${currentUser.name} ‚ñº</div><div class="dropdown-menu" id="dropdown-menu" style="display:none; position:absolute; background:white; border:1px solid #ccc; padding:10px; z-index:1000;"><button onclick="logout()">Log Out</button><button onclick="profile()">Profile</button><button onclick="switchUser()">Switch User</button></div>`;
            
            // Display user name in welcome message
            document.getElementById('user-name-display').textContent = currentUser.name;
            
            // Add event listener for dropdown
            document.getElementById('account-name').addEventListener('click', function() {
                const menu = document.getElementById('dropdown-menu');
                menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
            });
        }

        // Display current date
        const dateElement = document.getElementById('current-date');
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        dateElement.textContent = new Date().toLocaleDateString('en-US', options);

        // Task complete buttons
        document.querySelectorAll('.task-complete').forEach(button => {
            button.addEventListener('click', function() {
                const taskItem = this.closest('.task-item');
                taskItem.style.opacity = '0.5';
                this.textContent = '‚úì';
                this.style.background = '#4CAF50';
                setTimeout(() => {
                    taskItem.style.display = 'none';
                }, 500);
            });
        });

        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }

        function profile() {
            window.location.href = 'profile.html';
        }

        function switchUser() {
            logout();
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
